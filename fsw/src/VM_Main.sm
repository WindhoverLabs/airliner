%start VM_MainMap::Init
%class VM_Main
%fsmclass VM_MainContext
%header vm_Main.h
%map VM_MainMap

%%
Manual
    Entry
    {
        EnteredManual(); 
    }
{
    trAltitudeControl    AltitudeControl    { }
    trPositionControl    PositionControl    { }
    trAutoMission        AutoMission        { }
    trAutoLoiter         AutoLoiter         { }
    trAutoReturnToLaunch AutoReturnToLaunch { }
    trAcrobatic          Acrobatic          { }
    trOffboard           Offboard           { }
    trStabilize          Stabilize          { }
    trRattitude          Rattitude          { }
    trAutoTakeoff        [ 
                             ctxt.IsConditionLocalPositionValid() == true && 
                             ctxt.IsVehicleArmed() == true
                         ]
                         AutoTakeoff        { }
    trAutoLand           AutoLand           { }
    trAutoFollowTarget   AutoFollowTarget   { }
    trAutoPrecland       AutoPrecland       { }
}
AltitudeControl
    Entry
    {
        EnteredAltitudeControl(); 
    }
{
    trManual             Manual             { }
    trPositionControl    PositionControl    { }
    trAutoMission        AutoMission        { }
    trAutoLoiter         AutoLoiter         { }
    trAutoReturnToLaunch AutoReturnToLaunch { }
    trAcrobatic          Acrobatic          { }
    trOffboard           Offboard           { }
    trStabilize          Stabilize          { }
    trRattitude          Rattitude          { }
    trAutoTakeoff        [ 
                             ctxt.IsConditionLocalPositionValid() == true && 
                             ctxt.IsVehicleArmed() == true
                         ]
                         AutoTakeoff        { }
    trAutoLand           AutoLand           { }
    trAutoFollowTarget   AutoFollowTarget   { }
    trAutoPrecland       AutoPrecland       { }
}
PositionControl
    Entry
    {
        EnteredPositionControl(); 
    }
{
    trManual             Manual             { }
    trAltitudeControl    AltitudeControl    { }
    trAutoMission        AutoMission        { }
    trAutoLoiter         AutoLoiter         { }
    trAutoReturnToLaunch AutoReturnToLaunch { }
    trAcrobatic          Acrobatic          { }
    trOffboard           Offboard           { }
    trStabilize          Stabilize          { }
    trRattitude          Rattitude          { }
    trAutoTakeoff        [ 
                             ctxt.IsConditionLocalPositionValid() == true && 
                             ctxt.IsVehicleArmed() == true
                         ]
                         AutoTakeoff        { }
    trAutoLand           AutoLand           { }
    trAutoFollowTarget   AutoFollowTarget   { }
    trAutoPrecland       AutoPrecland       { }
}
AutoMission
    Entry
    {
        EnteredAutoMission(); 
    }
{
    trManual             Manual             { }
    trAltitudeControl    AltitudeControl    { }
    trPositionControl    PositionControl    { }
    trAutoLoiter         AutoLoiter         { }
    trAutoReturnToLaunch AutoReturnToLaunch { }
    trAcrobatic          Acrobatic          { }
    trOffboard           Offboard           { }
    trStabilize          Stabilize          { }
    trRattitude          Rattitude          { }
    trAutoTakeoff        [ 
                             ctxt.IsConditionLocalPositionValid() == true && 
                             ctxt.IsVehicleArmed() == true
                         ]
                         AutoTakeoff        { }
    trAutoLand           AutoLand           { }
    trAutoFollowTarget   AutoFollowTarget   { }
    trAutoPrecland       AutoPrecland       { }
}
AutoLoiter
    Entry
    {
        EnteredAutoLoiter(); 
    }
{
    trManual             Manual             { }
    trAltitudeControl    AltitudeControl    { }
    trPositionControl    PositionControl    { }
    trAutoMission        AutoMission        { }
    trAutoReturnToLaunch AutoReturnToLaunch { }
    trAcrobatic          Acrobatic          { }
    trOffboard           Offboard           { }
    trStabilize          Stabilize          { }
    trRattitude          Rattitude          { }
    trAutoTakeoff        [ 
                             ctxt.IsConditionLocalPositionValid() == true && 
                             ctxt.IsVehicleArmed() == true
                         ]
                         AutoTakeoff        { }
    trAutoLand           AutoLand           { }
    trAutoFollowTarget   AutoFollowTarget   { }
    trAutoPrecland       AutoPrecland       { }
}
AutoReturnToLaunch
    Entry
    {
        EnteredAutoReturnToLaunch(); 
    }
{
    trManual             Manual             { }
    trAltitudeControl    AltitudeControl    { }
    trPositionControl    PositionControl    { }
    trAutoMission        AutoMission        { }
    trAutoLoiter         AutoLoiter         { }
    trAcrobatic          Acrobatic          { }
    trOffboard           Offboard           { }
    trStabilize          Stabilize          { }
    trRattitude          Rattitude          { }
    trAutoTakeoff        [ 
                             ctxt.IsConditionLocalPositionValid() == true && 
                             ctxt.IsVehicleArmed() == true
                         ]
                         AutoTakeoff        { }
    trAutoLand           AutoLand           { }
    trAutoFollowTarget   AutoFollowTarget   { }
    trAutoPrecland       AutoPrecland       { }
}
Acrobatic
    Entry
    {
        EnteredAcrobatic(); 
    }
{
    trManual             Manual             { }
    trAltitudeControl    AltitudeControl    { }
    trPositionControl    PositionControl    { }
    trAutoMission        AutoMission        { }
    trAutoLoiter         AutoLoiter         { }
    trAutoReturnToLaunch AutoReturnToLaunch { }
    trOffboard           Offboard           { }
    trStabilize          Stabilize          { }
    trRattitude          Rattitude          { }
    trAutoTakeoff        [ 
                             ctxt.IsConditionLocalPositionValid() == true && 
                             ctxt.IsVehicleArmed() == true
                         ]
                         AutoTakeoff        { }
    trAutoLand           AutoLand           { }
    trAutoFollowTarget   AutoFollowTarget   { }
    trAutoPrecland       AutoPrecland       { }
}
Offboard
    Entry
    {
        EnteredOffboard(); 
    }
{
    trManual             Manual             { }
    trAltitudeControl    AltitudeControl    { }
    trPositionControl    PositionControl    { }
    trAutoMission        AutoMission        { }
    trAutoLoiter         AutoLoiter         { }
    trAutoReturnToLaunch AutoReturnToLaunch { }
    trAcrobatic          Acrobatic          { }
    trStabilize          Stabilize          { }
    trRattitude          Rattitude          { }
    trAutoTakeoff        [ 
                             ctxt.IsConditionLocalPositionValid() == true && 
                             ctxt.IsVehicleArmed() == true
                         ]
                         AutoTakeoff        { }
    trAutoLand           AutoLand           { }
    trAutoFollowTarget   AutoFollowTarget   { }
    trAutoPrecland       AutoPrecland       { }
}
Stabilize
    Entry
    {
        EnteredStabilize(); 
    }
{
    trManual             Manual             { }
    trAltitudeControl    AltitudeControl    { }
    trPositionControl    PositionControl    { }
    trAutoMission        AutoMission        { }
    trAutoLoiter         AutoLoiter         { }
    trAutoReturnToLaunch AutoReturnToLaunch { }
    trAcrobatic          Acrobatic          { }
    trOffboard           Offboard           { }
    trRattitude          Rattitude          { }
    trAutoTakeoff        [ 
                             ctxt.IsConditionLocalPositionValid() == true && 
                             ctxt.IsVehicleArmed() == true
                         ]
                         AutoTakeoff        { }
    trAutoLand           AutoLand           { }
    trAutoFollowTarget   AutoFollowTarget   { }
    trAutoPrecland       AutoPrecland       { }
}
Rattitude
    Entry
    {
        EnteredRattitude(); 
    }
{
    trManual             Manual             { }
    trAltitudeControl    AltitudeControl    { }
    trPositionControl    PositionControl    { }
    trAutoMission        AutoMission        { }
    trAutoLoiter         AutoLoiter         { }
    trAutoReturnToLaunch AutoReturnToLaunch { }
    trAcrobatic          Acrobatic          { }
    trOffboard           Offboard           { }
    trStabilize          Stabilize          { }
    trAutoTakeoff        [ 
                             ctxt.IsConditionLocalPositionValid() == true && 
                             ctxt.IsVehicleArmed() == true
                         ]
                         AutoTakeoff        { }
    trAutoLand           AutoLand           { }
    trAutoFollowTarget   AutoFollowTarget   { }
    trAutoPrecland       AutoPrecland       { }
}
AutoTakeoff
    Entry
    {
        EnteredAutoTakeoff(); 
    }
{
    trManual             Manual             { }
    trAltitudeControl    AltitudeControl    { }
    trPositionControl    PositionControl    { }
    trAutoMission        AutoMission        { }
    trAutoLoiter         AutoLoiter         { }
    trAutoReturnToLaunch AutoReturnToLaunch { }
    trAcrobatic          Acrobatic          { }
    trOffboard           Offboard           { }
    trStabilize          Stabilize          { }
    trRattitude          Rattitude          { }
    trAutoLand           AutoLand           { }
    trAutoFollowTarget   AutoFollowTarget   { }
    trAutoPrecland       AutoPrecland       { }
}
AutoLand
    Entry
    {
        EnteredAutoLand(); 
    }
{
    trManual             Manual             { }
    trAltitudeControl    AltitudeControl    { }
    trPositionControl    PositionControl    { }
    trAutoMission        AutoMission        { }
    trAutoLoiter         AutoLoiter         { }
    trAutoReturnToLaunch AutoReturnToLaunch { }
    trAcrobatic          Acrobatic          { }
    trOffboard           Offboard           { }
    trStabilize          Stabilize          { }
    trRattitude          Rattitude          { }
    trAutoTakeoff        [ 
                             ctxt.IsConditionLocalPositionValid() == true && 
                             ctxt.IsVehicleArmed() == true
                         ]
                         AutoTakeoff        { }
    trAutoFollowTarget   AutoFollowTarget   { }
    trAutoPrecland       AutoPrecland       { }
}
AutoFollowTarget
    Entry
    {
        EnteredAutoFollowTarget(); 
    }
{
    trManual             Manual             { }
    trAltitudeControl    AltitudeControl    { }
    trPositionControl    PositionControl    { }
    trAutoMission        AutoMission        { }
    trAutoLoiter         AutoLoiter         { }
    trAutoReturnToLaunch AutoReturnToLaunch { }
    trAcrobatic          Acrobatic          { }
    trOffboard           Offboard           { }
    trStabilize          Stabilize          { }
    trRattitude          Rattitude          { }
    trAutoTakeoff        [ 
                             ctxt.IsConditionLocalPositionValid() == true && 
                             ctxt.IsVehicleArmed() == true
                         ]
                         AutoTakeoff        { }
    trAutoLand           AutoLand           { }
    trAutoPrecland       AutoPrecland       { }
}
AutoPrecland
    Entry
    {
        EnteredAutoPrecland(); 
    }
{
    trManual             Manual             { }
    trAltitudeControl    AltitudeControl    { }
    trPositionControl    PositionControl    { }
    trAutoMission        AutoMission        { }
    trAutoLoiter         AutoLoiter         { }
    trAutoReturnToLaunch AutoReturnToLaunch { }
    trAcrobatic          Acrobatic          { }
    trOffboard           Offboard           { }
    trStabilize          Stabilize          { }
    trRattitude          Rattitude          { }
    trAutoTakeoff        [ 
                             ctxt.IsConditionLocalPositionValid() == true && 
                             ctxt.IsVehicleArmed() == true
                         ]
                         AutoTakeoff        { }
    trAutoLand           AutoLand           { }
    trAutoFollowTarget   AutoFollowTarget   { }
}
Init
{
    trInitComplete       AutoLoiter         { }
}
%%
